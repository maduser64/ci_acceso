{"version":3,"sources":["../assets/scripts/schedule.js","../assets/scripts/users.js","../assets/scripts/doors.js"],"names":["$","document","ready","scheduleSelector","scheduleTable","createDataTable","click","schedule_form","serialize","ajax","url","app_url","type","data","dataType","beforeSend","show","success","hide","error","showErrorMessage","msg","destroyDataTable","events","createDoorsEventsResultBody","html","request","console","log","JSON","stringify","searchUsersAJAX","user_list","length","options","users","tam","i","c_id","b_guid","c_fname","c_lname","append","accessOptions","result","tp_term_id","tp_term_name","tp_guid","accessItems","items","search_user_moves","user","door","user_id","door_name","usersTable","usersSelector","on","this","val","guid","find","attr","default_select","hasClass","addClass","access","select","removeClass","setInterval","access_selector","user_id_to_search","door_name_to_search","user_items","access_items","e","doorsSelector","doorsTable","door_selector","door_id","door_guid","start_date","start_time","end_date","end_time"],"mappings":"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","file":"events.js","sourcesContent":["$(document).ready(function() {\r\n    var scheduleSelector = $('#schedule-result-list-table');\r\n    var scheduleTable = createDataTable(scheduleSelector);\r\n    $(\"#search-schedule\").click(function () {\r\n        var schedule_form = $('#schedule-form').serialize();\r\n        $.ajax({\r\n            url: app_url+\"doors/doors/searchEventsBySchedule\",\r\n            type: \"POST\",\r\n            data: schedule_form,\r\n            dataType: \"json\",\r\n            beforeSend: function(){\r\n                $(\"#schedule-loading\").show();\r\n            },\r\n            success: function(data){\r\n                $(\"#schedule-loading\").hide(1000);\r\n                if (data.error===true) {\r\n                    showErrorMessage('#schedule-message',data.msg,5000);\r\n                }else{\r\n                    destroyDataTable(scheduleTable);\r\n                    var events = createDoorsEventsResultBody(data.events);\r\n                    $(\"#schedule-result-list-body\").html(events);\r\n                    scheduleTable = createDataTable(scheduleSelector);\r\n                    $(\"#schedule-result-list\").show();\r\n                }\r\n            },\r\n            error: function(request, error) {\r\n                console.log(\"Request: \" + JSON.stringify(request));\r\n                console.log(\"Error: \" + JSON.stringify(error));\r\n            }\r\n        });\r\n    });\r\n});\r\n","$(document).ready(function() {\r\n    function searchUsersAJAX(){\r\n        $.ajax({\r\n            url: app_url+\"doors/doors/getUserAJAX\",\r\n            type: \"POST\",\r\n            dataType: \"json\",\r\n            success: function(data){\r\n                var user_list = $('.user-select-search');\r\n                if(data.error===false && user_list.length>0){\r\n                    $(\".user-select-search\").html('');\r\n                    var users = data.users;\r\n                    var options = '';\r\n                    var tam = data.users.length;\r\n                    for(var i = 0; i < tam; i++){\r\n                        options = '<div class=\"link item\" data-id=\"'+data.users[i].c_id+'\" data-guid=\"'+data.users[i].b_guid+'\">'+data.users[i].c_fname+' '+data.users[i].c_lname+'</div>';\r\n                        $(\".user-select-search\").append(options);\r\n                    }\r\n                }\r\n            },\r\n            error: function(request, error) {\r\n                console.log(\"Request: \" + JSON.stringify(request));\r\n                console.log(\"Error: \" + JSON.stringify(error));\r\n            }\r\n        });\r\n    }\r\n\r\n    $('body').on('change', '#user-search', function() {\r\n        var user = $(this).val();\r\n        var guid = $(this).find(':selected').attr('data-guid');\r\n        var default_select = $(\"#access-content\").find('.ui.dropdown.selection');\r\n        $(\"#user-access\").val([]);\r\n        if(!default_select.hasClass(\"disabled\")){\r\n            $(\"#user-access\").html('<option>Accesos</option>');\r\n            default_select.addClass('disabled');\r\n        }\r\n        $.ajax({\r\n            url: app_url+\"doors/doors/getUserTerminalAccess\",\r\n            type: \"POST\",\r\n            data: {'user_id':user,'guid':guid},\r\n            dataType: \"json\",\r\n            success: function(data){\r\n                if(data.error===false){\r\n                    var options = accessOptions(data.access);\r\n                    var select = $(\"#access-content\").find('.ui.disabled.dropdown.selection');\r\n                    select.removeClass('disabled');\r\n                    $(\"#user-access\").html(options);\r\n                }\r\n            },\r\n            error: function(request, error) {\r\n                console.log(\"Request: \" + JSON.stringify(request));\r\n                console.log(\"Error: \" + JSON.stringify(error));\r\n            }\r\n        });\r\n    });\r\n    if($(\".user-select-search\").length>0){\r\n        setInterval(searchUsersAJAX, 20000);\r\n    }\r\n    function accessOptions(result){\r\n        var options = '<option>Accesos</option>';\r\n        var tam = result.length;\r\n        for (var i = 0; i < tam; i++) {\r\n            options += '<option value=\"'+result[i].tp_term_id+'\" data-name=\"'+result[i].tp_term_name+'\" data-guid=\"'+result[i].tp_guid+'\">'+result[i].tp_term_name+'</option>';\r\n        }\r\n        return options;\r\n    }\r\n    var usersSelector = $('#user-result-list-table');\r\n    var usersTable = createDataTable(usersSelector);\r\n\r\n    $(\"#search-users\").click(function () {\r\n        var user_id = $('#user-search').find(\":selected\").val();\r\n        var access_selector = $('#user-access').find(\":selected\");\r\n        var door_name = access_selector.attr(\"data-name\");\r\n        $.ajax({\r\n            url: app_url+\"doors/doors/searchEventByUsersAndAccess\",\r\n            type: \"POST\",\r\n            data: {'user_id':user_id,'door_name':door_name},\r\n            dataType: \"json\",\r\n            beforeSend: function(){\r\n                $(\"#users-loading\").show();\r\n            },\r\n            success: function(data){\r\n                $(\"#users-loading\").hide(1000);\r\n                if (data.error===true) {\r\n                    showErrorMessage('#users-message',data.msg,5000);\r\n                }else{\r\n                    destroyDataTable(usersTable);\r\n                    var events = createDoorsEventsResultBody(data.events);\r\n                    $(\"#user-result-list-body\").html(events);\r\n                    usersTable = createDataTable(usersSelector);\r\n                    $(\"#users-result-list\").show();\r\n                }\r\n            },\r\n            error: function(request, error) {\r\n                console.log(\"Request: \" + JSON.stringify(request));\r\n                console.log(\"Error: \" + JSON.stringify(error));\r\n            }\r\n        });\r\n    });\r\n    function accessItems(result){\r\n        var items = '';\r\n        var tam = result.length;\r\n        for (var i = 0; i < tam; i++) {\r\n            items += '<div class=\"link item\" data-id=\"'+result[i].tp_term_id+'\" data-name=\"'+result[i].tp_term_name+'\" data-guid=\"'+result[i].tp_guid+'\">'+result[i].tp_term_name+'</div>';\r\n        }\r\n        return items;\r\n    }\r\n    var user_id_to_search = 0;\r\n    var door_name_to_search = '*';\r\n    var user_items = $(\".user-select-search\").find('.item');\r\n    var access_items = $(\".access-select-search\").find('.item');\r\n\r\n    $(user_items).click(function(e) {\r\n        var user = $(this).data('id');\r\n        user_id_to_search = user;\r\n        var guid = $(this).data('guid');\r\n        $(\".access-column\").hide();\r\n        $(\".access-select-search\").html('');\r\n        $.ajax({\r\n            url: app_url+\"doors/doors/getUserTerminalAccess\",\r\n            type: \"POST\",\r\n            data: {'user_id':user,'guid':guid},\r\n            dataType: \"json\",\r\n            success: function(data){\r\n                if(data.error===false){\r\n                    var items = accessItems(data.access);\r\n                    $(\".access-select-search\").html(items);\r\n                    $(\".access-column\").show();\r\n                    access_items = $(\".access-select-search\").find('.item');\r\n                    $(access_items).click(function(e) {\r\n                        var door_name = $(this).data('name');\r\n                        door_name_to_search = door_name;\r\n                        search_user_moves(user_id_to_search,door_name_to_search);\r\n                    });\r\n                }\r\n            },\r\n            error: function(request, error) {\r\n                console.log(\"Request: \" + JSON.stringify(request));\r\n                console.log(\"Error: \" + JSON.stringify(error));\r\n            }\r\n        });\r\n    });\r\n\r\n    $(access_items).click(function(e) {\r\n        var door_name = $(this).data('name');\r\n        door_name_to_search = door_name;\r\n        console.log('el nombre de la peuerta es' + door_name_to_search);\r\n        search_user_moves(user_id_to_search,door_name_to_search);\r\n    });\r\n    function search_user_moves(user,door){\r\n        $.ajax({\r\n            url: app_url + \"doors/doors/searchEventByUsersAndAccess\",\r\n            type: \"POST\",\r\n            data: {'user_id': user, 'door_name': door},\r\n            dataType: \"json\",\r\n            beforeSend: function () {\r\n                $(\"#users-loading\").show();\r\n            },\r\n            success: function (data) {\r\n                $(\"#users-loading\").hide(1000);\r\n                if (data.error === true) {\r\n                    showErrorMessage('#users-message', data.msg, 5000);\r\n                } else {\r\n                    destroyDataTable(usersTable);\r\n                    var events = createDoorsEventsResultBody(data.events);\r\n                    $(\"#user-result-list-body\").html(events);\r\n                    usersTable = createDataTable(usersSelector);\r\n                    $(\"#users-result-list\").show();\r\n                }\r\n            },\r\n            error: function (request, error) {\r\n                console.log(\"Request: \" + JSON.stringify(request));\r\n                console.log(\"Error: \" + JSON.stringify(error));\r\n            }\r\n        });\r\n    }\r\n});\r\n","$(document).ready(function() {\r\n    var doorsSelector = $('#doors-result-list-table');\r\n    var doorsTable = createDataTable(doorsSelector);\r\n    $(\"#search-doors\").click(function () {\r\n        var door_selector = $('#doors-search').find(\":selected\");\r\n        var door_id = door_selector.val();\r\n        var door_name = door_selector.attr(\"data-name\");\r\n        var door_guid = door_selector.attr(\"data-guid\");\r\n        var start_date = $('#start_date').val();\r\n        var start_time = $('#start_time').val();\r\n        var end_date = $('#end_date').val();\r\n        var end_time = $('#end_time').val();\r\n        $.ajax({\r\n            url: app_url+\"doors/doors/searchEventByDoorAndSchedule\",\r\n            type: \"POST\",\r\n            data: {\r\n                'door_id':door_id,\r\n                'door_name':door_name,\r\n                'door_guid':door_guid,\r\n                'start_date':start_date,\r\n                'start_time':start_time,\r\n                'end_date':end_date,\r\n                'end_time':end_time\r\n            },\r\n            dataType: \"json\",\r\n            beforeSend: function(){\r\n                $(\"#door-loading\").show();\r\n            },\r\n            success: function(data){\r\n                $(\"#door-loading\").hide(1000);\r\n                if (data.error===true) {\r\n                    showErrorMessage('#doors-message',data.msg,5000);\r\n                }else{\r\n                    destroyDataTable(doorsTable);\r\n                    var events = createDoorsEventsResultBody(data.events);\r\n                    $(\"#doors-result-list-body\").html(events);\r\n                    doorsTable = createDataTable(doorsSelector);\r\n                    $(\"#doors-result-list\").show();\r\n                }\r\n            },\r\n            error: function(request, error) {\r\n                console.log(\"Request: \" + JSON.stringify(request));\r\n                console.log(\"Error: \" + JSON.stringify(error));\r\n            }\r\n        });\r\n    });\r\n});\r\n"],"sourceRoot":"assets/scripts/"}